<template>
  <div class="content-main cabinet">
    <div class="page-title">
      <div class="page-title-text mo">{{ $route.meta.title }}</div>
      <PremiumTitle/>
    </div>
    <div class="page-statistic">
      <div>
        <svg width="27" height="24" viewBox="0 0 27 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M9.33333 10.3704C10.3882 10.3704 11.4193 10.0663 12.2964 9.49651C13.1734 8.92675 13.857 8.11694 14.2607 7.16947C14.6644 6.222 14.77 5.17943 14.5642 4.17361C14.3584 3.16778 13.8504 2.24387 13.1046 1.51871C12.3587 0.793546 11.4084 0.299706 10.3738 0.0996342C9.33925 -0.100437 8.26689 0.00224664 7.29235 0.394701C6.31782 0.787155 5.48486 1.45175 4.89883 2.30445C4.31279 3.15715 4 4.15965 4 5.18519C4 6.56038 4.5619 7.87926 5.5621 8.85167C6.56229 9.82408 7.91884 10.3704 9.33333 10.3704ZM9.33333 2.59259C9.86075 2.59259 10.3763 2.74465 10.8149 3.02953C11.2534 3.3144 11.5952 3.71931 11.797 4.19304C11.9988 4.66678 12.0517 5.18806 11.9488 5.69098C11.8459 6.19389 11.5919 6.65585 11.219 7.01843C10.846 7.38101 10.3709 7.62793 9.85357 7.72796C9.33629 7.828 8.80011 7.77666 8.31284 7.58043C7.82557 7.3842 7.4091 7.0519 7.11608 6.62555C6.82306 6.1992 6.66667 5.69795 6.66667 5.18519C6.66667 4.49759 6.94762 3.83815 7.44771 3.35195C7.94781 2.86574 8.62609 2.59259 9.33333 2.59259ZM20 12.963C20.7911 12.963 21.5645 12.7349 22.2223 12.3076C22.8801 11.8803 23.3928 11.2729 23.6955 10.5623C23.9983 9.85169 24.0775 9.06976 23.9231 8.31539C23.7688 7.56102 23.3878 6.86809 22.8284 6.32422C22.269 5.78035 21.5563 5.40996 20.7804 5.25991C20.0044 5.10986 19.2002 5.18687 18.4693 5.48121C17.7384 5.77555 17.1136 6.274 16.6741 6.91352C16.2346 7.55305 16 8.30493 16 9.07408C16 10.1055 16.4214 11.0946 17.1716 11.8239C17.9217 12.5532 18.9391 12.963 20 12.963ZM20 7.77778C20.2637 7.77778 20.5215 7.85381 20.7408 7.99624C20.96 8.13868 21.1309 8.34114 21.2318 8.578C21.3328 8.81487 21.3592 9.07551 21.3077 9.32697C21.2563 9.57843 21.1293 9.8094 20.9428 9.99069C20.7563 10.172 20.5188 10.2954 20.2601 10.3455C20.0015 10.3955 19.7334 10.3698 19.4898 10.2717C19.2461 10.1736 19.0379 10.0074 18.8914 9.79426C18.7449 9.58108 18.6667 9.33046 18.6667 9.07408C18.6667 8.73028 18.8071 8.40056 19.0572 8.15746C19.3072 7.91435 19.6464 7.77778 20 7.77778ZM20 14.2593C18.5224 14.2609 17.0873 14.7396 15.92 15.6204C14.614 14.3556 12.9521 13.4952 11.1438 13.1476C9.33545 12.8 7.46176 12.9807 5.75897 13.667C4.05618 14.3533 2.60055 15.5145 1.57565 17.0041C0.550759 18.4937 0.00249359 20.2449 0 22.037C0 22.3808 0.140476 22.7106 0.390524 22.9537C0.640573 23.1968 0.979711 23.3333 1.33333 23.3333C1.68696 23.3333 2.02609 23.1968 2.27614 22.9537C2.52619 22.7106 2.66667 22.3808 2.66667 22.037C2.66667 20.318 3.36905 18.6695 4.61929 17.4539C5.86953 16.2384 7.56522 15.5556 9.33333 15.5556C11.1014 15.5556 12.7971 16.2384 14.0474 17.4539C15.2976 18.6695 16 20.318 16 22.037C16 22.3808 16.1405 22.7106 16.3905 22.9537C16.6406 23.1968 16.9797 23.3333 17.3333 23.3333C17.687 23.3333 18.0261 23.1968 18.2761 22.9537C18.5262 22.7106 18.6667 22.3808 18.6667 22.037C18.6698 20.5183 18.2752 19.0239 17.52 17.6944C18.1092 17.2418 18.8176 16.9595 19.5642 16.8799C20.3107 16.8004 21.0652 16.9268 21.7413 17.2446C22.4174 17.5624 22.9878 18.0589 23.3872 18.6772C23.7867 19.2955 23.999 20.0106 24 20.7407C24 21.0845 24.1405 21.4143 24.3905 21.6574C24.6406 21.9005 24.9797 22.037 25.3333 22.037C25.687 22.037 26.0261 21.9005 26.2761 21.6574C26.5262 21.4143 26.6667 21.0845 26.6667 20.7407C26.6667 19.0217 25.9643 17.3732 24.714 16.1576C23.4638 14.9421 21.7681 14.2593 20 14.2593Z"
            fill="#B9FFB1"/>
        </svg>
        <span>{{ $t('games.players') }}</span>
        <span class="mo">{{ onlineUsers }}</span>
      </div>
      <div class="select">
        <select v-model="selectCurrency">
          <option v-for="(item, key) in balances" :key="key" :value="key">
            <cryptoicon class="crypto" :symbol="key" size="24"/>
            {{ key.toUpperCase() }} {{ item }}
          </option>
        </select>
      </div>
      <div class="right">
        <svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M23.625 4.5C21.6079 4.5 19.7797 4.878 18.351 5.59012C16.9234 6.30225 15.75 7.46213 15.75 9V13.5C15.75 13.6451 15.7984 13.7858 15.8209 13.9219C14.6948 13.6357 13.5369 13.494 12.375 13.5C10.3579 13.5 8.52975 13.878 7.101 14.5901C5.67337 15.3022 4.5 16.4621 4.5 18V27C4.5 28.5379 5.67338 29.6978 7.10213 30.4099C8.52975 31.122 10.3579 31.5 12.375 31.5C14.3921 31.5 16.2203 31.122 17.649 30.4099C19.0755 29.6978 20.25 28.5379 20.25 27V26.5432C21.3505 26.8408 22.485 26.9943 23.625 27C25.6421 27 27.4702 26.622 28.899 25.9099C30.3255 25.1978 31.5 24.0379 31.5 22.5V9C31.5 7.46213 30.3266 6.30225 28.8979 5.59012C27.4714 4.878 25.6432 4.5 23.625 4.5ZM23.625 6.75C25.3384 6.75 26.8639 7.119 27.8786 7.62863C28.8945 8.13825 29.25 8.67487 29.25 9C29.25 9.32625 28.8945 9.86175 27.8786 10.3714C26.865 10.881 25.3384 11.25 23.625 11.25C21.9116 11.25 20.3861 10.881 19.3714 10.3714C18.3555 9.86175 18 9.32513 18 9C18 8.67375 18.3555 8.13825 19.3714 7.62863C20.385 7.119 21.9116 6.75 23.625 6.75ZM18 12.1995C18.1181 12.2648 18.2284 12.3491 18.3521 12.4099C19.7797 13.122 21.6079 13.5 23.625 13.5C25.6421 13.5 27.4702 13.122 28.899 12.4099C29.0216 12.3491 29.1319 12.2648 29.25 12.1995V13.5C29.25 13.8263 28.8945 14.3617 27.8786 14.8714C26.8639 15.381 25.3384 15.75 23.625 15.75C21.9116 15.75 20.3861 15.381 19.3714 14.8714C18.3555 14.3617 18 13.8251 18 13.5V12.1995ZM12.375 15.75C14.0884 15.75 15.6139 16.119 16.6286 16.6286C17.6445 17.1383 18 17.6749 18 18C18 18.3263 17.6445 18.8617 16.6286 19.3714C15.6139 19.881 14.0884 20.25 12.375 20.25C10.6616 20.25 9.13613 19.881 8.12137 19.3714C7.1055 18.8617 6.75 18.3251 6.75 18C6.75 17.6737 7.1055 17.1383 8.12137 16.6286C9.135 16.119 10.6616 15.75 12.375 15.75ZM29.25 16.6995V18C29.25 18.3263 28.8945 18.8617 27.8786 19.3714C26.8639 19.881 25.3384 20.25 23.625 20.25C22.479 20.2562 21.3394 20.0781 20.25 19.7224V18C20.25 17.8549 20.2016 17.7142 20.1791 17.5781C21.2254 17.8504 22.3853 18 23.625 18C25.6421 18 27.4702 17.622 28.899 16.9099C29.0216 16.8491 29.1319 16.7647 29.25 16.6995ZM6.75 21.1995C6.86812 21.2647 6.97838 21.3491 7.10213 21.4099C8.52975 22.122 10.3579 22.5 12.375 22.5C14.3921 22.5 16.2203 22.122 17.649 21.4099C17.7716 21.3491 17.8819 21.2647 18 21.1995V22.5C18 22.8263 17.6445 23.3617 16.6286 23.8714C15.6139 24.381 14.0884 24.75 12.375 24.75C10.6616 24.75 9.13613 24.381 8.12137 23.8714C7.1055 23.3617 6.75 22.8251 6.75 22.5V21.1995ZM29.25 21.1995V22.5C29.25 22.8263 28.8945 23.3617 27.8786 23.8714C26.8639 24.381 25.3384 24.75 23.625 24.75C22.3459 24.75 21.1905 24.57 20.25 24.2572V22.0781C21.2827 22.3504 22.4077 22.5 23.625 22.5C25.6421 22.5 27.4702 22.122 28.899 21.4099C29.0216 21.3491 29.1319 21.2647 29.25 21.1995ZM6.75 25.6995C6.86812 25.7647 6.97838 25.8491 7.10213 25.9099C8.52975 26.622 10.3579 27 12.375 27C14.3921 27 16.2203 26.622 17.649 25.9099C17.7716 25.8491 17.8819 25.7647 18 25.6995V27C18 27.3263 17.6445 27.8617 16.6286 28.3714C15.6139 28.881 14.0884 29.25 12.375 29.25C10.6616 29.25 9.13613 28.881 8.12137 28.3714C7.1055 27.8617 6.75 27.3251 6.75 27V25.6995Z"
            fill="#B9FFB1"/>
        </svg>
        <span>{{ $t('games.bankroll') }}</span>
        <span class="mo">100.542$</span>
      </div>
    </div>


    <transition name="fade" mode="out-in">
      <router-view/>
    </transition>
  </div>
</template>

<script>
import PremiumTitle from '@/components/Cabinet/PremiumTitle'

export default {
  name: "GamesLayout",
  components: {PremiumTitle},
  data: () => {
    return {}
  },
  created() {
    this.enterLobby()
  },
  beforeDestroy() {
    this.exitLobby()
  },
  methods: {
    enterLobby: function () {
      this.$store.dispatch('sendSocketGameLobby', true)
    },
    exitLobby: function () {
      this.$store.dispatch('sendSocketGameLobby', false)
    },
  },
  computed: {
    balances() {
      return this.$store.getters.getBalances
    },
    balance() {
      return this.$store.getters.getBalance
    },
    selectCurrency: {
      get() {
        return this.$store.getters.getSelectCurr
      },
      set(val) {
        this.$store.commit('changeSelectCurr', val)
      }
    },
    onlineUsers() {
      return this.$store.getters.getGameLobbyOnline.online
    },
    isConnectedSocket() {
      return this.$store.getters.isConnectedSocket
    }
  },
  watch: {
    isConnectedSocket() {
      this.enterLobby()
    }
  }
}
</script>

<style scoped lang="scss">
.page-statistic {
  display: flex;
  justify-content: center;
  flex-wrap: wrap-reverse;
  margin: 0 80px 10px 80px;

  > div:not(.select) {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: linear-gradient(270deg, rgba(39, 39, 84, 0) 0%, #272754 100%);
    border-radius: 6px;
    font-weight: normal;
    font-size: 16px;
    line-height: 22px;
    flex: 1;
    margin: 10px 2% 0 0;
    padding: 10px 20px;

    > span:nth-child(3) {
      color: #8B8ECE;
      font-weight: bold;
      font-size: 18px;
    }


    @media screen and (max-width: 1023px) {
      margin: 10px 2%;
    }
  }

  > div.right {
    background: linear-gradient(270deg, #272754 0%, rgba(39, 39, 84, 0) 100%);
    margin-right: 0;
  }

  .select {
    border-radius: 6px;
    flex: 1;
    margin: 10px 2% 0 0;
    padding: 10px 20px;
    min-width: 150px;
    max-width: 250px;
    position: relative;

    > select {
      background-color: #272754;
      font-weight: bold;
      font-size: 16px;
      line-height: 22px;
    }

    .crypto {
      position: absolute;
      top: 0;
      left: -20px;
    }

    @media screen and (max-width: 1023px) {
      margin: 10px 2%;
      grid-area: selectt;
      max-width: none;
    }

  }

  @media screen and (max-width: 1023px) {
    display: grid;
    grid-template-rows: 1fr 1fr;
    grid-template-columns: 1fr 1fr;
    grid-template-areas:  "selectt selectt" ". .";
    > div {
      margin: 10px 2%;
    }
    .select {
      grid-area: selectt;

    }
  }
  @media screen and (max-width: 520px) {
    display: grid;
    grid-template-rows: 1fr 1fr 1fr;
    grid-template-columns: 1fr;
    grid-template-areas:  "selectt" "." ".";
  }
}
</style>

